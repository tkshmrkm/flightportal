<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JAL FOP/ãƒã‚¤ãƒ«/LSP è¨ˆç®—ãƒ»æ¯”è¼ƒãƒ„ãƒ¼ãƒ«ï¼ˆå›½å†…ç·šç‰ˆï¼‰</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Hiragino Kaku Gothic ProN', 'Hiragino Sans', Meiryo, sans-serif;
            line-height: 1.6;
            color: #1f2937;
            background: linear-gradient(135deg, #dbeafe 0%, #fef2f2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            background: white;
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            padding: 40px;
            margin-bottom: 30px;
            border-left: 8px solid #dc2626;
        }

        .header h1 {
            font-size: 2.5rem;
            font-weight: 800;
            color: #1f2937;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .header-icon {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #dc2626, #b91c1c);
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.8rem;
        }

        .header p {
            color: #6b7280;
            font-size: 1.1rem;
            margin-left: 75px;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr;
            gap: 30px;
        }

        .input-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .results-container {
            width: 100%;
        }

        .card {
            background: white;
            border-radius: 15px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            padding: 30px;
            margin-bottom: 25px;
            transition: all 0.3s ease;
            border: 1px solid rgba(0,0,0,0.05);
        }

        .card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 30px rgba(0,0,0,0.12);
        }

        .card-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 12px;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid #f3f4f6;
        }

        .card-header-left {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .card-icon {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.2rem;
        }

        .card-title {
            font-size: 1.3rem;
            font-weight: 700;
            color: #1f2937;
        }

        label {
            display: block;
            margin: 15px 0 8px;
            font-weight: 600;
            color: #374151;
            font-size: 0.95rem;
        }

        input[type="number"], select {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #e5e7eb;
            border-radius: 10px;
            font-size: 1rem;
            transition: all 0.3s ease;
            background: #fafafa;
        }

        input[type="number"]:focus, select:focus, .segment-fare:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
            background: white;
        }

        .input-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .status-display {
            padding: 8px 12px;
            background: rgba(0,0,0,0.05);
            border-radius: 8px;
            border: 1px solid rgba(0,0,0,0.1);
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }

        .segment {
            background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
            border: 2px solid #e2e8f0;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            position: relative;
            transition: all 0.3s ease;
        }

        .segment:hover {
            border-color: #cbd5e1;
            transform: translateY(-1px);
        }

        .segment-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .segment-title {
            font-weight: 700;
            color: #475569;
            font-size: 1.1rem;
        }

        .remove-segment {
            background: linear-gradient(135deg, #ef4444, #dc2626);
            color: white;
            border: none;
            border-radius: 50%;
            width: 35px;
            height: 35px;
            cursor: pointer;
            font-size: 1.1rem;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .remove-segment:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 15px rgba(239, 68, 68, 0.3);
        }

        .route-grid {
            display: grid;
            grid-template-columns: 2fr auto 2fr;
            gap: 15px;
            align-items: end;
            margin-bottom: 20px;
        }

        .arrow {
            display: flex;
            align-items: center;
            justify-content: center;
            color: #6b7280;
            font-size: 1.5rem;
            padding-bottom: 12px;
        }

        .options-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 15px;
        }

        .checkbox-container {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px;
            background: rgba(59, 130, 246, 0.05);
            border-radius: 8px;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .checkbox-container:hover {
            border-color: #3b82f6;
        }

        input[type="checkbox"] {
            width: 18px;
            height: 18px;
            accent-color: #3b82f6;
            cursor: pointer;
        }

        .checkbox-label {
            font-weight: 600;
            color: #374151;
            cursor: pointer;
            margin: 0;
        }

        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            padding: 15px 25px;
            border: none;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
        }

        .btn-primary {
            background: linear-gradient(135deg, #3b82f6, #2563eb);
            color: white;
            box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(59, 130, 246, 0.4);
        }

        .btn-calculate {
            background: linear-gradient(135deg, #dc2626, #b91c1c);
            color: white;
            width: 100%;
            padding: 20px;
            font-size: 1.3rem;
            font-weight: 700;
            box-shadow: 0 6px 20px rgba(220, 38, 38, 0.3);
            margin: 30px 0;
        }

        .btn-calculate:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 35px rgba(220, 38, 38, 0.4);
        }

        /* æ”¹å–„ã•ã‚ŒãŸçµæœè¡¨ç¤ºã‚¨ãƒªã‚¢ */
        .results-section {
            display: grid;
            grid-template-columns: 1fr;
            gap: 25px;
        }

        .results-overview {
            background: linear-gradient(135deg, #fef3c7, #fde68a);
            border: 2px solid #f59e0b;
            border-radius: 20px;
            padding: 30px;
        }

        .results-overview h3 {
            color: #92400e;
            margin-bottom: 25px;
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 1.6rem;
            font-weight: 800;
        }

        .overview-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }

        .overview-item {
            text-align: center;
            padding: 20px;
            background: rgba(255, 255, 255, 0.4);
            border-radius: 15px;
            border: 1px solid rgba(146, 64, 14, 0.1);
            transition: all 0.3s ease;
        }

        .overview-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(146, 64, 14, 0.15);
        }

        .overview-label {
            font-size: 1rem;
            color: #92400e;
            margin-bottom: 8px;
            font-weight: 600;
        }

        .overview-value {
            font-weight: 900;
            font-size: 1.8rem;
            color: #dc2626;
            text-shadow: 0 1px 2px rgba(0,0,0,0.1);
        }

        .progress-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 25px;
        }

        .progress-card {
            border-radius: 20px;
            padding: 25px;
            border: 1px solid;
            background: linear-gradient(135deg, #ecfdf5, #d1fae5);
            border-color: #10b981;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .progress-card.fop-card {
            background: linear-gradient(135deg, #fef3c7, #fde68a);
            border-color: #f59e0b;
        }

        .progress-card h4 {
            color: #065f46;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 1.4rem;
            font-weight: 700;
        }

        .progress-card.fop-card h4 {
            color: #92400e;
        }

        .progress-stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }

        .progress-stat {
            background: rgba(255, 255, 255, 0.7);
            padding: 15px;
            border-radius: 12px;
            text-align: center;
            border: 1px solid rgba(0,0,0,0.05);
        }

        .progress-stat-label {
            font-size: 0.9rem;
            color: #065f46;
            margin-bottom: 5px;
            font-weight: 600;
        }

        .progress-card.fop-card .progress-stat-label {
            color: #92400e;
        }

        .progress-stat-value {
            font-weight: 800;
            color: #047857;
            font-size: 1.2rem;
        }

        .progress-card.fop-card .progress-stat-value {
            color: #d97706;
        }

        .progress-bar {
            background: rgba(255, 255, 255, 0.8);
            border-radius: 15px;
            height: 20px;
            overflow: hidden;
            margin: 15px 0;
            border: 1px solid rgba(0,0,0,0.05);
        }

        .progress-fill {
            background: linear-gradient(90deg, #10b981, #059669);
            height: 100%;
            transition: width 0.8s ease;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .progress-card.fop-card .progress-fill {
            background: linear-gradient(90deg, #f59e0b, #d97706);
        }

        .progress-text {
            font-size: 0.9rem;
            font-weight: 700;
            color: white;
            text-shadow: 0 1px 2px rgba(0,0,0,0.5);
        }

        .cost-info {
            text-align: center;
            margin-top: 15px;
            padding: 12px;
            background: rgba(255, 255, 255, 0.6);
            border-radius: 10px;
            border: 1px solid rgba(0,0,0,0.05);
        }

        .cost-label {
            font-size: 0.9rem;
            color: #065f46;
            margin-bottom: 3px;
        }

        .progress-card.fop-card .cost-label {
            color: #92400e;
        }

        .cost-value {
            font-weight: 800;
            font-size: 1.1rem;
            color: #047857;
        }

        .progress-card.fop-card .cost-value {
            color: #d97706;
        }

        .detailed-results {
            background: white;
            border-radius: 20px;
            box-shadow: 0 8px 30px rgba(0,0,0,0.12);
            border: 1px solid #e5e7eb;
            overflow: hidden;
        }

        .results-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 1rem;
        }

        .results-table th {
            background: linear-gradient(135deg, #1f2937, #374151);
            color: white;
            padding: 20px 15px;
            font-weight: 700;
            text-align: center;
            font-size: 1.1rem;
        }

        .results-table th:first-child {
            text-align: left;
        }

        .results-table td {
            padding: 15px;
            border-bottom: 1px solid #f3f4f6;
            text-align: right;
            font-size: 1rem;
        }

        .results-table td:first-child {
            text-align: left;
            font-weight: 600;
            background: #f8fafc;
            color: #374151;
        }

        .results-table tr:nth-child(even) {
            background: #f8fafc;
        }

        .results-table tr:hover {
            background: #eff6ff;
        }

        .value-highlight {
            font-weight: 800;
            color: #059669;
            font-size: 1.1rem;
        }

        .error-message {
            background: linear-gradient(135deg, #fef2f2, #fee2e2);
            border: 2px solid #f87171;
            border-radius: 12px;
            padding: 15px;
            color: #dc2626;
            font-weight: 600;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .notice {
            background: linear-gradient(135deg, #eff6ff, #dbeafe);
            border: 2px solid #60a5fa;
            border-radius: 15px;
            padding: 25px;
            margin-top: 30px;
            display: flex;
            align-items: flex-start;
            gap: 15px;
        }

        .notice-icon {
            color: #2563eb;
            font-size: 1.3rem;
            margin-top: 2px;
        }

        .notice-content {
            color: #1e40af;
        }

        .notice-title {
            font-weight: 700;
            margin-bottom: 8px;
            font-size: 1.1rem;
        }

        .notice-text {
            font-size: 1rem;
            line-height: 1.6;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .fade-in {
            animation: fadeInUp 0.6s ease-out;
        }

        @keyframes fadeOut {
            from {
                opacity: 1;
                transform: translateY(0);
            }
            to {
                opacity: 0;
                transform: translateY(-20px);
            }
        }

        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(100%);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes slideOutRight {
            from {
                opacity: 1;
                transform: translateX(0);
            }
            to {
                opacity: 0;
                transform: translateX(100%);
            }
        }

        .icon-user { background: linear-gradient(135deg, #f59e0b, #d97706); }
        .icon-plane { background: linear-gradient(135deg, #3b82f6, #2563eb); }
        .icon-payment { background: linear-gradient(135deg, #059669, #047857); }
        .icon-trophy { background: linear-gradient(135deg, #f59e0b, #d97706); }
        .icon-star { background: linear-gradient(135deg, #10b981, #059669); }
        .icon-chart { background: linear-gradient(135deg, #8b5cf6, #7c3aed); }

        @media (max-width: 768px) {
            .input-section {
                grid-template-columns: 1fr;
            }
            
            .overview-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .progress-section {
                grid-template-columns: 1fr;
            }
            
            .progress-stats {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 1.8rem;
            }
            
            .header-icon {
                width: 50px;
                height: 50px;
                font-size: 1.5rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header fade-in">
            <h1>
                <div class="header-icon">
                    <i class="fas fa-plane"></i>
                </div>
                JAL FOP/ãƒã‚¤ãƒ«/LSP è¨ˆç®—ãƒ„ãƒ¼ãƒ«ï¼ˆå›½å†…ç·šç‰ˆï¼‰
            </h1>
            <p>å›½å†…ç·šã®ãƒ•ãƒ©ã‚¤ãƒˆåŒºé–“ã‚„é‹è³ƒã€æ”¯æ‰•ã„æƒ…å ±ã‚’å…¥åŠ›ã—ã¦ã€ç²å¾—ã§ãã‚‹ãƒã‚¤ãƒ«ã€FOPã€LSPã‚’ã‚«ãƒ¼ãƒ‰åˆ¥ã«æ¯”è¼ƒã—ã¾ã™ã€‚</p>
        </div>

        <div class="main-content">
            <!-- å…¥åŠ›ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
            <div class="input-section">
                <!-- Current Status -->
                    <div class="card fade-in">
                    <div class="card-header">
                        <div class="card-header-left">
                            <div class="card-icon icon-star">
                                <i class="fas fa-star"></i>
                            </div>
                            <h2 class="card-title">ç¾åœ¨ã®å®Ÿç¸¾</h2>
                        </div>
                        <button class="btn" style="background: linear-gradient(135deg, #6b7280, #4b5563); color: white; padding: 8px 15px; font-size: 0.8rem;" onclick="resetSavedData()" title="è¨­å®šã‚’ãƒªã‚»ãƒƒãƒˆ">
                            <i class="fas fa-undo"></i>
                            ãƒªã‚»ãƒƒãƒˆ
                        </button>
                    </div>
                    <div class="input-grid">
                        <div>
                            <label for="current-lsp">ç¾åœ¨ã®LSP (Life Status Points)</label>
                            <input type="number" id="current-lsp" value="0" placeholder="ä¾‹: 750">
                            <div id="current-lsp-status" class="status-display" style="margin-top: 5px; font-size: 0.9rem; color: #059669; font-weight: 600;"></div>
                        </div>
                        <div>
                            <label for="current-fop">ç¾åœ¨ã®FOP (FLY ON Points)</label>
                            <input type="number" id="current-fop" value="0" placeholder="ä¾‹: 25000">
                            <div id="current-fop-status" class="status-display" style="margin-top: 5px; font-size: 0.9rem; color: #d97706; font-weight: 600;"></div>
                        </div>
                    </div>
                    <div style="margin-top: 15px;">
                        <label for="lsp-target-goal">LSPç›®æ¨™ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ï¼ˆç´¯ç©ãƒ»ç”Ÿæ¶¯ï¼‰</label>
                        <select id="lsp-target-goal">
                            <option value="lsp_250">JMB elite (250 LSP)</option>
                            <option value="lsp_500">JMB elite plus (500 LSP)</option>
                            <option value="lsp_1500" selected>JGC Three Star (1,500 LSP)</option>
                            <option value="lsp_3000">JGC Four Star (3,000 LSP)</option>
                            <option value="lsp_10000">JGC Five Star (10,000 LSP)</option>
                            <option value="lsp_30000">JGC Six Star (30,000 LSP)</option>
                        </select>
                    </div>
                    <div style="margin-top: 15px;">
                        <label for="fop-target-goal">FOPç›®æ¨™ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ï¼ˆå¹´é–“ãƒ»ãƒªã‚»ãƒƒãƒˆï¼‰</label>
                        <select id="fop-target-goal">
                            <option value="fop_30000">JMBã‚¯ãƒªã‚¹ã‚¿ãƒ« (30,000 FOP)</option>
                            <option value="fop_50000" selected>JMBã‚µãƒ•ã‚¡ã‚¤ã‚¢ (50,000 FOP)</option>
                            <option value="fop_80000">JGCãƒ—ãƒ¬ãƒŸã‚¢ (80,000 FOP)</option>
                            <option value="fop_100000">JMBãƒ€ã‚¤ãƒ¤ãƒ¢ãƒ³ãƒ‰ (100,000 FOP)</option>
                        </select>
                    </div>
                </div>

                <!-- JAL Card Selection -->
                <div class="card fade-in">
                    <div class="card-header">
                        <div class="card-header-left">
                            <div class="card-icon icon-payment">
                                <i class="fas fa-credit-card"></i>
                            </div>
                            <h2 class="card-title">JALã‚«ãƒ¼ãƒ‰</h2>
                        </div>
                    </div>
                    <div>
                        <label for="jal-card">åˆ©ç”¨ã™ã‚‹JALã‚«ãƒ¼ãƒ‰</label>
                        <select id="jal-card">
                            <option value="none">JALã‚«ãƒ¼ãƒ‰ãªã—</option>
                            <option value="normal">JALæ™®é€šã‚«ãƒ¼ãƒ‰</option>
                            <option value="club-a">JAL CLUB-A</option>
                            <option value="gold_vmjd">JAL CLUB-Aã‚´ãƒ¼ãƒ«ãƒ‰ (V/M/J/D)</option>
                            <option value="gold_amex">JAL CLUB-Aã‚´ãƒ¼ãƒ«ãƒ‰ (Amex)</option>
                            <option value="platinum">JALãƒ—ãƒ©ãƒãƒŠ</option>
                        </select>
                        
                        <div class="checkbox-container" style="margin-top: 15px;">
                            <input type="checkbox" id="smp-option">
                            <label for="smp-option" class="checkbox-label">
                                <i class="fas fa-shopping-cart"></i>
                                ã‚·ãƒ§ãƒƒãƒ”ãƒ³ã‚°ãƒã‚¤ãƒ«ãƒ»ãƒ—ãƒ¬ãƒŸã‚¢ãƒ (SMP)åŠ å…¥
                            </label>
                        </div>
                    </div>
                </div>


            </div>

            <!-- Flight Information -->
            <div class="card fade-in">
                <div class="card-header">
                    <div class="card-header-left">
                        <div class="card-icon icon-plane">
                            <i class="fas fa-plane-departure"></i>
                        </div>
                        <h2 class="card-title">ãƒ•ãƒ©ã‚¤ãƒˆæƒ…å ±</h2>
                    </div>
                    <button class="btn btn-primary" id="add-segment">
                        <i class="fas fa-plus"></i>
                        åŒºé–“è¿½åŠ 
                    </button>
                </div>
                <div id="segments-container">
                    <!-- Segments will be added here -->
                </div>
            </div>

            <button class="btn btn-calculate" id="calculate-btn">
                <i class="fas fa-calculator"></i>
                è¨ˆç®—ï¼†æ¯”è¼ƒ
            </button>

            <!-- åˆè¨ˆæ–™é‡‘è¡¨ç¤º -->
            <div class="card" style="background: linear-gradient(135deg, #f0fdf4, #dcfce7); border: 2px solid #16a34a;">
                <div class="card-header">
                    <div class="card-header-left">
                        <div class="card-icon" style="background: linear-gradient(135deg, #16a34a, #15803d);">
                            <i class="fas fa-calculator"></i>
                        </div>
                        <h2 class="card-title">åˆè¨ˆæ–™é‡‘</h2>
                    </div>
                </div>
                <div style="text-align: center; padding: 20px;">
                    <div style="font-size: 0.9rem; color: #15803d; margin-bottom: 5px;">èˆªç©ºåˆ¸æ”¯æ‰•ã„ç·é¡</div>
                    <div style="font-size: 2rem; font-weight: 800; color: #dc2626;" id="total-fare-display">0å††</div>
                    <div style="font-size: 0.85rem; color: #6b7280; margin-top: 5px;">â€»å„åŒºé–“ã®æ–™é‡‘ãŒè‡ªå‹•åˆè¨ˆã•ã‚Œã¾ã™</div>
                </div>
            </div>

            <div id="error-container"></div>

            <!-- çµ±åˆã•ã‚ŒãŸçµæœè¡¨ç¤ºã‚¨ãƒªã‚¢ -->
            <div class="results-container">
                <div class="results-section" id="results-section" style="display: none;">
                    <!-- çµæœæ¦‚è¦ -->
                    <div class="results-overview">
                        <h3>
                            <i class="fas fa-chart-line"></i>
                            ä»Šå›ç²å¾—ãƒã‚¤ãƒ³ãƒˆãƒ»ãƒã‚¤ãƒ«
                        </h3>
                        <div class="overview-grid">
                            <div class="overview-item">
                                <div class="overview-label">ãƒ•ãƒ©ã‚¤ãƒˆãƒã‚¤ãƒ«</div>
                                <div class="overview-value" id="flight-miles-summary">0</div>
                            </div>
                            <div class="overview-item">
                                <div class="overview-label">æ±ºæ¸ˆãƒã‚¤ãƒ«</div>
                                <div class="overview-value" id="payment-miles-summary">0</div>
                            </div>
                            <div class="overview-item">
                                <div class="overview-label">åˆè¨ˆãƒã‚¤ãƒ«</div>
                                <div class="overview-value" id="total-miles-summary">0</div>
                            </div>
                            <div class="overview-item">
                                <div class="overview-label">FOP</div>
                                <div class="overview-value" id="total-fop-summary">0</div>
                            </div>
                            <div class="overview-item">
                                <div class="overview-label">LSP</div>
                                <div class="overview-value" id="total-lsp-earned-summary">0</div>
                            </div>
                        </div>
                    </div>

                    <!-- é€²æ—çŠ¶æ³ -->
                    <div class="progress-section">
                        <div class="progress-card">
                            <h4>
                                <i class="fas fa-star"></i>
                                LSPé€²æ—çŠ¶æ³ï¼ˆç”Ÿæ¶¯ç´¯ç©ï¼‰
                            </h4>
                            <div class="progress-stats">
                                <div class="progress-stat">
                                    <div class="progress-stat-label">ç¾åœ¨ã®LSP</div>
                                    <div class="progress-stat-value" id="current-lsp-display">0</div>
                                </div>
                                <div class="progress-stat">
                                    <div class="progress-stat-label">ä»Šå›ç²å¾—LSP</div>
                                    <div class="progress-stat-value" id="earned-lsp-display">0</div>
                                </div>
                                <div class="progress-stat">
                                    <div class="progress-stat-label">åˆè¨ˆLSP</div>
                                    <div class="progress-stat-value" id="total-lsp-display">0</div>
                                </div>
                                <div class="progress-stat">
                                    <div class="progress-stat-label">ç›®æ¨™ã¾ã§</div>
                                    <div class="progress-stat-value" id="remaining-lsp-display">0</div>
                                </div>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" id="lsp-progress-fill">
                                    <div class="progress-text" id="lsp-progress-text">0%</div>
                                </div>
                            </div>
                        </div>

                        <div class="progress-card fop-card">
                            <h4>
                                <i class="fas fa-trophy"></i>
                                FOPé€²æ—çŠ¶æ³ï¼ˆå¹´é–“ãƒªã‚»ãƒƒãƒˆï¼‰
                            </h4>
                            <div class="progress-stats">
                                <div class="progress-stat">
                                    <div class="progress-stat-label">ç¾åœ¨ã®FOP</div>
                                    <div class="progress-stat-value" id="current-fop-display">0</div>
                                </div>
                                <div class="progress-stat">
                                    <div class="progress-stat-label">ä»Šå›ç²å¾—FOP</div>
                                    <div class="progress-stat-value" id="earned-fop-display">0</div>
                                </div>
                                <div class="progress-stat">
                                    <div class="progress-stat-label">åˆè¨ˆFOP</div>
                                    <div class="progress-stat-value" id="total-fop-display">0</div>
                                </div>
                                <div class="progress-stat">
                                    <div class="progress-stat-label">ç›®æ¨™ã¾ã§</div>
                                    <div class="progress-stat-value" id="remaining-fop-display">0</div>
                                </div>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" id="fop-progress-fill">
                                    <div class="progress-text" id="fop-progress-text">0%</div>
                                </div>
                            </div>
                            <div class="cost-info">
                                <div class="cost-label">FOPå˜ä¾¡</div>
                                <div class="cost-value" id="fop-cost-display">0.00å††/FOP</div>
                            </div>
                        </div>
                    </div>

                    <!-- è©³ç´°çµæœãƒ†ãƒ¼ãƒ–ãƒ« -->
                    <div class="card">
                        <div class="card-header">
                            <div class="card-header-left">
                                <div class="card-icon icon-chart">
                                    <i class="fas fa-table"></i>
                                </div>
                                <h2 class="card-title">è©³ç´°çµæœ</h2>
                            </div>
                        </div>
                        <div class="detailed-results" id="results-table-container">
                            <!-- Results table will be generated here -->
                        </div>
                    </div>
                </div>
            </div>

            <div class="notice">
                <i class="fas fa-info-circle notice-icon"></i>
                <div class="notice-content">
                    <div class="notice-title">ã”æ³¨æ„</div>
                    <div class="notice-text">
                        ã“ã®ãƒ„ãƒ¼ãƒ«ã¯JALå…¬å¼ãƒã‚¤ãƒ«ç©ç®—è¡¨ã«åŸºã¥ã„ã¦ä½œæˆã•ã‚ŒãŸã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ã§ã™ã€‚å®Ÿéš›ã®ç²å¾—ãƒã‚¤ãƒ«ãƒ»ãƒã‚¤ãƒ³ãƒˆæ•°ã¨ã¯ç•°ãªã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚æœ€çµ‚çš„ãªå€¤ã¯JALã®å…¬å¼ç™ºè¡¨ã‚’ã”ç¢ºèªãã ã•ã„ã€‚<br>
                        <strong>ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼:</strong> å…¥åŠ›ã•ã‚ŒãŸå®Ÿç¸¾ã‚„ã‚«ãƒ¼ãƒ‰æƒ…å ±ã¯ãŠä½¿ã„ã®ãƒ–ãƒ©ã‚¦ã‚¶ã«ã®ã¿ä¿å­˜ã•ã‚Œã€å¤–éƒ¨ã«ã¯é€ä¿¡ã•ã‚Œã¾ã›ã‚“ã€‚
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // åŒ…æ‹¬çš„ãªå›½å†…ç·šãƒã‚¤ãƒ«ãƒ‡ãƒ¼ã‚¿ï¼ˆJALå…¬å¼ç©ç®—è¡¨ã«åŸºã¥ãï¼‰
        var mileageData = {
            "HND-CTS": 510, "HND-FUK": 567, "HND-OKA": 984, "HND-ITM": 280, "HND-KIX": 280, "HND-NGO": 193,
            "HND-AKJ": 576, "HND-HKD": 424, "HND-AOJ": 358, "HND-SDJ": 190, "HND-OKJ": 356, "HND-HIJ": 414,
            "HND-TAK": 354, "HND-KMJ": 568, "HND-KOJ": 601, "HND-KMI": 561, "HND-NGS": 610, "HND-OIT": 499,
            "HND-ASJ": 787, "HND-MMY": 1158, "HND-ISG": 1224, "HND-HNA": 297, "HND-AXT": 380, "HND-MSJ": 448,
            "HND-SHM": 440, "HND-IWJ": 294, "HND-GAJ": 360, "HND-FKS": 166, "HND-KIJ": 576, "HND-UBJ": 481,
            "HND-TOY": 172, "HND-NTQ": 250, "HND-KMQ": 280, "HND-YGJ": 290,
            
            "ITM-CTS": 666, "ITM-FUK": 287, "ITM-OKA": 739, "ITM-SDJ": 396, "ITM-AOJ": 523, "ITM-KOJ": 329,
            "ITM-KMI": 292, "ITM-NGS": 330, "ITM-OIT": 219, "ITM-ASJ": 541, "ITM-MSJ": 448, "ITM-AKJ": 446,
            "ITM-HKD": 504, "ITM-HNA": 495, "ITM-YGJ": 360, "ITM-KMQ": 280, "ITM-KMJ": 328,
            
            "CTS-FUK": 882, "CTS-NGO": 614, "CTS-SDJ": 335, "CTS-HNA": 507, "CTS-AKJ": 72, "CTS-AOJ": 276,
            "CTS-MSJ": 244, "CTS-KIX": 666, "CTS-OKA": 1254,
            
            "FUK-OKA": 537, "FUK-NGO": 374, "FUK-SDJ": 665, "FUK-HNA": 724, "FUK-KMI": 131, "FUK-KOJ": 156,
            "FUK-NGS": 117, "FUK-KMJ": 64, "FUK-OIT": 87, "FUK-TSJ": 179, "FUK-IKI": 64, "FUK-ASJ": 466,
            
            "NGO-OKA": 809, "NGO-SDJ": 322, "NGO-KOJ": 487, "NGO-KMI": 418, "NGO-FUK": 374, "NGO-AOJ": 436,
            "NGO-HKD": 503, "NGO-AKJ": 528, "NGO-MSJ": 241,
            
            "OKA-SDJ": 1130, "OKA-ISG": 247, "OKA-MMY": 177, "OKA-KMI": 593, "OKA-KOJ": 646, "OKA-NGS": 696,
            "OKA-ASJ": 203,
            
            "SDJ-AOJ": 168, "SDJ-HKD": 317, "SDJ-AKJ": 408, "SDJ-HNA": 73, "SDJ-MSJ": 92, "SDJ-YGJ": 99,
            "AOJ-AKJ": 264, "AOJ-HKD": 149, "HKD-AKJ": 158, "KOJ-KMI": 25, "KOJ-NGS": 120, "KOJ-ASJ": 443,
            "KMI-NGS": 101, "KMI-ASJ": 420, "NGS-TSJ": 115, "NGS-IKI": 70, "ASJ-MMY": 984, "ASJ-ISG": 992,
            "MMY-ISG": 69,
            
            "NRT-CTS": 530, "NRT-ITM": 300, "NRT-KIX": 300, "NRT-FUK": 587, "NRT-OKA": 1004,
            
            "AXT-MSJ": 68, "AXT-HNA": 141, "IWJ-YGJ": 99, "FKS-YGJ": 124, "TOY-KMQ": 55, "NTQ-KMQ": 29,
            "GAJ-YGJ": 70, "GAJ-KIJ": 216, "UBJ-KMQ": 201, "TSJ-IKI": 67
        };
        
        // åŒæ–¹å‘ãƒ‡ãƒ¼ã‚¿ã‚’è‡ªå‹•ç”Ÿæˆ
        var mileageKeys = Object.keys(mileageData);
        for (var i = 0; i < mileageKeys.length; i++) {
            var key = mileageKeys[i];
            var routeParts = key.split('-');
            var dep = routeParts[0];
            var arr = routeParts[1];
            var reversedKey = arr + '-' + dep;
            if (!mileageData[reversedKey]) {
                mileageData[reversedKey] = mileageData[key];
            }
        }

        // ç©ºæ¸¯åãƒã‚¹ã‚¿ãƒ¼
        var airportNames = {
            HND: "æ±äº¬(ç¾½ç”°)", NRT: "æ±äº¬(æˆç”°)", CTS: "æœ­å¹Œ(æ–°åƒæ­³)", FUK: "ç¦å²¡", ITM: "å¤§é˜ª(ä¼Šä¸¹)", 
            KIX: "å¤§é˜ª(é–¢è¥¿)", NGO: "åå¤å±‹(ä¸­éƒ¨)", OKA: "æ²–ç¸„(é‚£è¦‡)", AKJ: "æ—­å·", HKD: "å‡½é¤¨",
            AOJ: "é’æ£®", SDJ: "ä»™å°", OKJ: "å²¡å±±", HIJ: "åºƒå³¶", TAK: "é«˜æ¾", KMJ: "ç†Šæœ¬", 
            KOJ: "é¹¿å…å³¶", KMI: "å®®å´", NGS: "é•·å´", OIT: "å¤§åˆ†", ASJ: "å¥„ç¾å¤§å³¶", MMY: "å®®å¤å³¶",
            ISG: "çŸ³å£å³¶", HNA: "èŠ±å·»", AXT: "ç§‹ç”°", MSJ: "ä¸‰æ²¢", SHM: "å—ç´€ç™½æµœ", IWJ: "å²©å›½",
            GAJ: "å±±å£å®‡éƒ¨", FKS: "ç¦å³¶", KIJ: "åŒ—ä¹å·", UBJ: "å±±å½¢", TOY: "å¯Œå±±", NTQ: "èƒ½ç™»",
            KMQ: "å°æ¾", YGJ: "ç±³å­", TSJ: "å¯¾é¦¬", IKI: "å£±å²"
        };
        
        // uniqueAirportsã®ç”Ÿæˆ
        var allAirports = [];
        var mileageKeys = Object.keys(mileageData);
        for (var i = 0; i < mileageKeys.length; i++) {
            var routeParts = mileageKeys[i].split('-');
            allAirports.push(routeParts[0]);
            allAirports.push(routeParts[1]);
        }
        // é‡è¤‡ã‚’é™¤å»ã—ã¦ã‚½ãƒ¼ãƒˆ
        var uniqueAirports = [];
        for (var i = 0; i < allAirports.length; i++) {
            if (uniqueAirports.indexOf(allAirports[i]) === -1) {
                uniqueAirports.push(allAirports[i]);
            }
        }
        uniqueAirports.sort();

        // é‹è³ƒç¨®åˆ¥ï¼ˆä¿®æ­£ç‰ˆï¼šæ­£ã—ã„FOPç©ç®—ç‡ï¼‰
        var fareTypes = {
            "flex": { name: "ãƒ•ãƒ¬ãƒƒã‚¯ã‚¹, ãƒ“ã‚¸ãƒã‚¹ãƒ•ãƒ¬ãƒƒã‚¯ã‚¹ (100%)", mileMultiplier: 1.0, fopMultiplier: 2.0, bonusFop: 400 },
            "saber": { name: "ã‚»ã‚¤ãƒãƒ¼, ã‚¹ãƒšã‚·ãƒ£ãƒ«ã‚»ã‚¤ãƒãƒ¼ (75%)", mileMultiplier: 0.75, fopMultiplier: 1.5, bonusFop: 200 },
            "promo75": { name: "æ ªä¸»å‰²å¼•ãªã© (75%)", mileMultiplier: 0.75, fopMultiplier: 1.5, bonusFop: 0 },
            "promo50": { name: "ãƒ—ãƒ­ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³, ãƒ„ã‚¢ãƒ¼ç­‰ (50%)", mileMultiplier: 0.5, fopMultiplier: 1.0, bonusFop: 0 },
            "promo0": { name: "ãƒã‚¤ãƒ«ç©ç®—å¯¾è±¡å¤–é‹è³ƒ (0%)", mileMultiplier: 0.0, fopMultiplier: 0.0, bonusFop: 0 }
        };
        
        // æ­ä¹—ã‚¯ãƒ©ã‚¹ï¼ˆä¿®æ­£ç‰ˆï¼šæ­£ã—ã„è¨ˆç®—æ–¹æ³•ï¼‰
        var cabinClasses = {
            "economy": { name: "ã‚¨ã‚³ãƒãƒŸãƒ¼ã‚¯ãƒ©ã‚¹", mileBonus: 0, fopBonus: 0 },
            "class_j": { name: "ã‚¯ãƒ©ã‚¹J", mileBonus: 0.10, fopBonus: 0.10 },
            "first": { name: "ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆã‚¯ãƒ©ã‚¹", mileBonus: 0.50, fopBonus: 0.50 }
        };

        // JALã‚«ãƒ¼ãƒ‰ç¨®åˆ¥
        var cardTypes = {
            "none": { flightBonus: 0, addOnMileRate: 0, shoppingRate: 0 },
            "normal": { flightBonus: 0.10, addOnMileRate: 0, shoppingRate: 0.5 },
            "club-a": { flightBonus: 0.25, addOnMileRate: 0, shoppingRate: 0.5 },
            "gold_vmjd": { flightBonus: 0.25, addOnMileRate: 0, shoppingRate: 1.0 },
            "gold_amex": { flightBonus: 0.25, addOnMileRate: 1, shoppingRate: 1.0 },
            "platinum": { flightBonus: 0.25, addOnMileRate: 2, shoppingRate: 1.0 }
        };

        // JMBã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ï¼ˆFOPã‹ã‚‰è‡ªå‹•åˆ¤å®šï¼‰
        function getJmbStatusFromFop(fop) {
            if (fop >= 100000) return { key: "diamond", bonus: 1.30 };
            if (fop >= 80000) return { key: "jgc_premier", bonus: 1.30 };
            if (fop >= 50000) return { key: "sapphire", bonus: 1.05 };
            if (fop >= 30000) return { key: "crystal", bonus: 0.55 };
            return { key: "none", bonus: 0 };
        }

        // LSPã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹åˆ¤å®šï¼ˆæ˜‡é †ã«å¤‰æ›´ï¼‰
        var lspStatusLevels = [
            { min: 0, name: "ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãªã—", icon: "ğŸ“Š", color: "#d1d5db" },
            { min: 250, name: "JMB elite", icon: "ğŸ¥‰", color: "#9ca3af" },
            { min: 500, name: "JMB elite plus", icon: "ğŸ¥ˆ", color: "#6b7280" },
            { min: 1500, name: "JGC Three Star", icon: "ğŸŒŸ", color: "#059669" },
            { min: 3000, name: "JGC Four Star", icon: "âœ¨", color: "#10b981" },
            { min: 10000, name: "JGC Five Star", icon: "â­", color: "#8b5cf6" },
            { min: 30000, name: "JGC Six Star", icon: "ğŸ‘‘", color: "#7c3aed" }
        ];

        // FOPã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹åˆ¤å®šï¼ˆæ˜‡é †ã«å¤‰æ›´ï¼‰
        var fopStatusLevels = [
            { min: 0, name: "ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãªã—", icon: "ğŸ“ˆ", color: "#d1d5db" },
            { min: 30000, name: "JMBã‚¯ãƒªã‚¹ã‚¿ãƒ«", icon: "ğŸ’š", color: "#10b981" },
            { min: 50000, name: "JMBã‚µãƒ•ã‚¡ã‚¤ã‚¢", icon: "ğŸ’™", color: "#3b82f6" },
            { min: 80000, name: "JGCãƒ—ãƒ¬ãƒŸã‚¢", icon: "ğŸ†", color: "#f59e0b" },
            { min: 100000, name: "JMBãƒ€ã‚¤ãƒ¤ãƒ¢ãƒ³ãƒ‰", icon: "ğŸ’", color: "#60a5fa" }
        ];

        // ç›®æ¨™è¨­å®š
        var lspTargetGoals = {
            "lsp_250": { value: 250, name: "JMB elite" },
            "lsp_500": { value: 500, name: "JMB elite plus" },
            "lsp_1500": { value: 1500, name: "JGC Three Star" },
            "lsp_3000": { value: 3000, name: "JGC Four Star" },
            "lsp_10000": { value: 10000, name: "JGC Five Star" },
            "lsp_30000": { value: 30000, name: "JGC Six Star" }
        };

        var fopTargetGoals = {
            "fop_30000": { value: 30000, name: "JMBã‚¯ãƒªã‚¹ã‚¿ãƒ«" },
            "fop_50000": { value: 50000, name: "JMBã‚µãƒ•ã‚¡ã‚¤ã‚¢" },
            "fop_80000": { value: 80000, name: "JGCãƒ—ãƒ¬ãƒŸã‚¢" },
            "fop_100000": { value: 100000, name: "JMBãƒ€ã‚¤ãƒ¤ãƒ¢ãƒ³ãƒ‰" }
        };

        // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹åˆ¤å®šé–¢æ•°ï¼ˆä¿®æ­£ç‰ˆï¼‰
        function getLspStatus(lsp) {
            // æ˜‡é †é…åˆ—ã‚’é€†å‘ãã«æ¤œç´¢ã—ã¦è©²å½“ã™ã‚‹ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’è¦‹ã¤ã‘ã‚‹
            for (var i = lspStatusLevels.length - 1; i >= 0; i--) {
                if (lsp >= lspStatusLevels[i].min) {
                    return lspStatusLevels[i];
                }
            }
            return lspStatusLevels[0]; // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ
        }

        function getFopStatus(fop) {
            // æ˜‡é †é…åˆ—ã‚’é€†å‘ãã«æ¤œç´¢ã—ã¦è©²å½“ã™ã‚‹ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’è¦‹ã¤ã‘ã‚‹
            for (var i = fopStatusLevels.length - 1; i >= 0; i--) {
                if (fop >= fopStatusLevels[i].min) {
                    return fopStatusLevels[i];
                }
            }
            return fopStatusLevels[0]; // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ
        }

        // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¡¨ç¤ºæ›´æ–°
        function updateStatusDisplays() {
            var currentLsp = parseInt(document.getElementById('current-lsp').value) || 0;
            var currentFop = parseInt(document.getElementById('current-fop').value) || 0;

            var lspStatus = getLspStatus(currentLsp);
            var fopStatus = getFopStatus(currentFop);

            // LSPã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¡¨ç¤º
            var lspStatusElement = document.getElementById('current-lsp-status');
            lspStatusElement.innerHTML = lspStatus.icon + ' ' + lspStatus.name;
            lspStatusElement.style.color = lspStatus.color;

            // FOPã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¡¨ç¤º
            var fopStatusElement = document.getElementById('current-fop-status');
            fopStatusElement.innerHTML = fopStatus.icon + ' ' + fopStatus.name;
            fopStatusElement.style.color = fopStatus.color;

            // æ¬¡ã®ãƒ¬ãƒ™ãƒ«ã¾ã§ã®æƒ…å ±ã‚‚è¡¨ç¤ºï¼ˆä¿®æ­£ç‰ˆï¼‰
            var nextLspLevel = null;
            var nextFopLevel = null;
            
            // æ˜‡é †é…åˆ—ã§ç¾åœ¨ã®ãƒã‚¤ãƒ³ãƒˆæ•°ã‚ˆã‚Šä¸Šã®æœ€åˆã®ãƒ¬ãƒ™ãƒ«ã‚’æ¢ã™
            for (var i = 0; i < lspStatusLevels.length; i++) {
                if (lspStatusLevels[i].min > currentLsp) {
                    nextLspLevel = lspStatusLevels[i];
                    break;
                }
            }
            
            for (var i = 0; i < fopStatusLevels.length; i++) {
                if (fopStatusLevels[i].min > currentFop) {
                    nextFopLevel = fopStatusLevels[i];
                    break;
                }
            }

            if (nextLspLevel) {
                lspStatusElement.innerHTML += ' <span style="color: #6b7280; font-size: 0.8rem;">(æ¬¡: ' + nextLspLevel.name + ' ã¾ã§ ' + (nextLspLevel.min - currentLsp).toLocaleString() + ')</span>';
            }

            if (nextFopLevel) {
                fopStatusElement.innerHTML += ' <span style="color: #6b7280; font-size: 0.8rem;">(æ¬¡: ' + nextFopLevel.name + ' ã¾ã§ ' + (nextFopLevel.min - currentFop).toLocaleString() + ')</span>';
            }
        }

        // DOM elements
        var segmentsContainer = document.getElementById('segments-container');
        var addSegmentBtn = document.getElementById('add-segment');
        var calculateBtn = document.getElementById('calculate-btn');
        var errorContainer = document.getElementById('error-container');
        var tableContainer = document.getElementById('results-table-container');
        var resultsSection = document.getElementById('results-section');
        
        var segmentCount = 0;

        // ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿
        function loadSavedData() {
            try {
                var savedData = localStorage.getItem('jalCalculatorData');
                if (savedData) {
                    var data = JSON.parse(savedData);
                    
                    // ç¾åœ¨ã®å®Ÿç¸¾ã‚’å¾©å…ƒ
                    if (data.currentLsp !== undefined) {
                        document.getElementById('current-lsp').value = data.currentLsp;
                    }
                    if (data.currentFop !== undefined) {
                        document.getElementById('current-fop').value = data.currentFop;
                    }
                    
                    // ç›®æ¨™è¨­å®šã‚’å¾©å…ƒ
                    if (data.lspTargetGoal) {
                        document.getElementById('lsp-target-goal').value = data.lspTargetGoal;
                    }
                    if (data.fopTargetGoal) {
                        document.getElementById('fop-target-goal').value = data.fopTargetGoal;
                    }
                    
                    // JALã‚«ãƒ¼ãƒ‰è¨­å®šã‚’å¾©å…ƒ
                    if (data.jalCard) {
                        document.getElementById('jal-card').value = data.jalCard;
                    }
                    if (data.smpOption !== undefined) {
                        document.getElementById('smp-option').checked = data.smpOption;
                    }
                    
                    console.log('å‰å›ã®è¨­å®šã‚’å¾©å…ƒã—ã¾ã—ãŸ');
                    return true;
                }
            } catch (error) {
                console.error('ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ:', error);
            }
            return false;
        }

        // ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜
        function saveData() {
            try {
                var data = {
                    currentLsp: parseInt(document.getElementById('current-lsp').value) || 0,
                    currentFop: parseInt(document.getElementById('current-fop').value) || 0,
                    lspTargetGoal: document.getElementById('lsp-target-goal').value,
                    fopTargetGoal: document.getElementById('fop-target-goal').value,
                    jalCard: document.getElementById('jal-card').value,
                    smpOption: document.getElementById('smp-option').checked,
                    lastUpdated: new Date().toISOString()
                };
                
                localStorage.setItem('jalCalculatorData', JSON.stringify(data));
                console.log('è¨­å®šã‚’ä¿å­˜ã—ã¾ã—ãŸ');
            } catch (error) {
                console.error('ãƒ‡ãƒ¼ã‚¿ã®ä¿å­˜ã«å¤±æ•—ã—ã¾ã—ãŸ:', error);
            }
        }

        // ãƒ‡ãƒ¼ã‚¿ä¿å­˜ã®ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã‚’è¿½åŠ 
        function setupAutoSave() {
            var elements = [
                'current-lsp', 'current-fop', 'lsp-target-goal', 
                'fop-target-goal', 'jal-card', 'smp-option'
            ];
            
            for (var i = 0; i < elements.length; i++) {
                var element = document.getElementById(elements[i]);
                if (element) {
                    element.addEventListener('change', function(e) {
                        var elementId = e.target.id;
                        if (elementId === 'current-lsp' || elementId === 'current-fop') {
                            updateStatusDisplays();
                        }
                        saveData();
                    });
                    
                    element.addEventListener('input', function(e) {
                        var elementId = e.target.id;
                        if (elementId === 'current-lsp' || elementId === 'current-fop') {
                            updateStatusDisplays();
                        }
                        saveData();
                    });
                }
            }
        }

        // è¨­å®šãƒªã‚»ãƒƒãƒˆæ©Ÿèƒ½
        function resetSavedData() {
            try {
                localStorage.removeItem('jalCalculatorData');
                location.reload(); // ãƒšãƒ¼ã‚¸ã‚’ãƒªãƒ­ãƒ¼ãƒ‰ã—ã¦åˆæœŸçŠ¶æ…‹ã«æˆ»ã™
            } catch (error) {
                console.error('è¨­å®šã®ãƒªã‚»ãƒƒãƒˆã«å¤±æ•—ã—ã¾ã—ãŸ:', error);
            }
        }

        // å¹³å‡çš„ãªæ–™é‡‘ã‚’è·é›¢ã«åŸºã¥ã„ã¦æ¨å®š
        function getEstimatedFare(miles, isRoundTrip) {
            var baseFare;
            if (miles <= 300) {
                baseFare = 20000; // è¿‘è·é›¢ï¼ˆé–¢è¥¿-æ±äº¬ãªã©ï¼‰
            } else if (miles <= 600) {
                baseFare = 30000; // ä¸­è·é›¢ï¼ˆæ±äº¬-ç¦å²¡ãªã©ï¼‰
            } else if (miles <= 900) {
                baseFare = 35000; // ä¸­é•·è·é›¢
            } else {
                baseFare = 42000; // é•·è·é›¢ï¼ˆæ±äº¬-æ²–ç¸„ãªã©ï¼‰
            }
            return isRoundTrip ? baseFare * 1.8 : baseFare; // å¾€å¾©ã¯ç´„1.8å€
        }

        // ç·æ–™é‡‘ã‚’è‡ªå‹•è¨ˆç®—
        function updateTotalFare() {
            var segments = segmentsContainer.getElementsByClassName('segment');
            var total = 0;
            
            for (var i = 0; i < segments.length; i++) {
                var segmentFareInput = segments[i].querySelector('.segment-fare');
                if (segmentFareInput) {
                    var fare = parseFloat(segmentFareInput.value) || 0;
                    total += fare;
                }
            }
            
            // åˆè¨ˆæ–™é‡‘è¡¨ç¤ºã‚’æ›´æ–°ï¼ˆç”»é¢ä¸‹éƒ¨ã«è¿½åŠ ï¼‰
            var totalFareDisplay = document.getElementById('total-fare-display');
            if (totalFareDisplay) {
                totalFareDisplay.textContent = total.toLocaleString() + 'å††';
            }
            
            return total;
        }

        // åŒºé–“ã®æ–™é‡‘ã‚’æ›´æ–°ï¼ˆå‡ºç™ºåœ°ãƒ»ç›®çš„åœ°ãƒ»å¾€å¾©ãŒå¤‰æ›´ã•ã‚ŒãŸæ™‚ï¼‰
        function updateSegmentFare(segmentId) {
            var fromSelect = document.getElementById('from-' + segmentId);
            var toSelect = document.getElementById('to-' + segmentId);
            var roundTripCheckbox = document.getElementById('round-trip-' + segmentId);
            var segmentFareInput = document.getElementById('segment-fare-' + segmentId);
            
            if (fromSelect && toSelect && segmentFareInput) {
                var route = fromSelect.value + '-' + toSelect.value;
                var miles = mileageData[route];
                var isRoundTrip = roundTripCheckbox ? roundTripCheckbox.checked : false;
                
                if (miles && fromSelect.value !== toSelect.value) {
                    var estimatedFare = getEstimatedFare(miles, isRoundTrip);
                    segmentFareInput.value = Math.round(estimatedFare);
                } else {
                    segmentFareInput.value = 0;
                }
                
                updateTotalFare();
            }
        }

        function createSegment() {
            segmentCount++;
            var segmentDiv = document.createElement('div');
            segmentDiv.className = 'segment';
            segmentDiv.id = 'segment-' + segmentCount;
            
            var airportOptionsHtml = '';
            for (var i = 0; i < uniqueAirports.length; i++) {
                var code = uniqueAirports[i];
                airportOptionsHtml += '<option value="' + code + '">' + (airportNames[code] || code) + '</option>';
            }
            
            var fareKeys = Object.keys(fareTypes);
            var fareOptionsHtml = '';
            for (var i = 0; i < fareKeys.length; i++) {
                var key = fareKeys[i];
                fareOptionsHtml += '<option value="' + key + '">' + fareTypes[key].name + '</option>';
            }
            
            var classKeys = Object.keys(cabinClasses);
            var classOptionsHtml = '';
            for (var i = 0; i < classKeys.length; i++) {
                var key = classKeys[i];
                classOptionsHtml += '<option value="' + key + '">' + cabinClasses[key].name + '</option>';
            }

            segmentDiv.innerHTML = 
                '<div class="segment-header">' +
                    '<div class="segment-title">' +
                        '<i class="fas fa-route"></i>' +
                        'åŒºé–“ ' + segmentCount +
                    '</div>' +
                    '<button class="remove-segment" onclick="removeSegment(' + segmentCount + ')">' +
                        '<i class="fas fa-times"></i>' +
                    '</button>' +
                '</div>' +
                '<div class="route-grid">' +
                    '<div>' +
                        '<label for="from-' + segmentCount + '">å‡ºç™ºåœ° (From)</label>' +
                        '<select id="from-' + segmentCount + '" class="from-airport">' + airportOptionsHtml + '</select>' +
                    '</div>' +
                    '<div class="arrow">' +
                        '<i class="fas fa-arrow-right"></i>' +
                    '</div>' +
                    '<div>' +
                        '<label for="to-' + segmentCount + '">ç›®çš„åœ° (To)</label>' +
                        '<select id="to-' + segmentCount + '" class="to-airport">' + airportOptionsHtml + '</select>' +
                    '</div>' +
                '</div>' +
                '<div class="options-grid">' +
                    '<div>' +
                        '<label for="class-' + segmentCount + '">æ­ä¹—ã‚¯ãƒ©ã‚¹:</label>' +
                        '<select id="class-' + segmentCount + '" class="class-select">' + classOptionsHtml + '</select>' +
                    '</div>' +
                    '<div>' +
                        '<label for="fare-' + segmentCount + '">é‹è³ƒç¨®åˆ¥:</label>' +
                        '<select id="fare-' + segmentCount + '" class="fare-type-select">' + fareOptionsHtml + '</select>' +
                    '</div>' +
                '</div>' +
                '<div style="margin-bottom: 15px;">' +
                    '<label for="segment-fare-' + segmentCount + '">ã“ã®åŒºé–“ã®æ–™é‡‘ï¼ˆå††ï¼‰:</label>' +
                    '<input type="number" id="segment-fare-' + segmentCount + '" class="segment-fare" value="0" placeholder="ä¾‹: 25000" style="width: 100%; padding: 12px 16px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 1rem; transition: all 0.3s ease; background: #fafafa;">' +
                '</div>' +
                '<div class="checkbox-container">' +
                    '<input type="checkbox" id="round-trip-' + segmentCount + '" class="round-trip-checkbox">' +
                    '<label for="round-trip-' + segmentCount + '" class="checkbox-label">' +
                        '<i class="fas fa-exchange-alt"></i>' +
                        'å¾€å¾©' +
                    '</label>' +
                '</div>';
            
            segmentDiv.style.animation = 'fadeInUp 0.6s ease-out';
            segmentsContainer.appendChild(segmentDiv);
            
            // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤è¨­å®š
            document.getElementById('from-' + segmentCount).value = 'ITM';
            document.getElementById('to-' + segmentCount).value = 'HND';
            document.getElementById('class-' + segmentCount).value = 'economy';
            document.getElementById('fare-' + segmentCount).value = 'saber';
            
            // æ–™é‡‘è‡ªå‹•è¨ˆç®—ã®ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼è¿½åŠ 
            var fromSelect = document.getElementById('from-' + segmentCount);
            var toSelect = document.getElementById('to-' + segmentCount);
            var roundTripCheckbox = document.getElementById('round-trip-' + segmentCount);
            var segmentFareInput = document.getElementById('segment-fare-' + segmentCount);
            
            fromSelect.addEventListener('change', function() { updateSegmentFare(segmentCount); });
            toSelect.addEventListener('change', function() { updateSegmentFare(segmentCount); });
            roundTripCheckbox.addEventListener('change', function() { updateSegmentFare(segmentCount); });
            segmentFareInput.addEventListener('input', updateTotalFare);
            
            // åˆæœŸæ–™é‡‘è¨­å®š
            updateSegmentFare(segmentCount);
        }

        function removeSegment(id) {
            var segment = document.getElementById('segment-' + id);
            if (segment && segmentsContainer.children.length > 1) {
                segment.style.animation = 'fadeOut 0.3s ease-out';
                setTimeout(function() {
                    segment.remove();
                    updateSegmentNumbers();
                }, 300);
            }
        }

        function updateSegmentNumbers() {
            var remainingSegments = segmentsContainer.getElementsByClassName('segment');
            for(var i = 0; i < remainingSegments.length; i++){
                var titleElement = remainingSegments[i].querySelector('.segment-title');
                titleElement.innerHTML = '<i class="fas fa-route"></i> åŒºé–“ ' + (i + 1);
            }
            updateTotalFare(); // æ–™é‡‘ã‚‚å†è¨ˆç®—
        }

        function displayError(message) {
            errorContainer.innerHTML = 
                '<div class="error-message">' +
                    '<i class="fas fa-exclamation-triangle"></i>' +
                    message +
                '</div>';
        }

        function clearError() {
            errorContainer.innerHTML = '';
        }

        function updateProgress(earnedLsp, earnedFop, totalFare) {
            var currentLsp = parseInt(document.getElementById('current-lsp').value) || 0;
            var currentFop = parseInt(document.getElementById('current-fop').value) || 0;
            var lspTargetGoalKey = document.getElementById('lsp-target-goal').value;
            var fopTargetGoalKey = document.getElementById('fop-target-goal').value;
            var lspTargetGoal = lspTargetGoals[lspTargetGoalKey];
            var fopTargetGoal = fopTargetGoals[fopTargetGoalKey];

            // LSPé€²æ—æ›´æ–°
            var totalLsp = currentLsp + earnedLsp;
            document.getElementById('current-lsp-display').textContent = currentLsp.toLocaleString();
            document.getElementById('earned-lsp-display').textContent = earnedLsp.toFixed(2);
            document.getElementById('total-lsp-display').textContent = totalLsp.toFixed(2);

            var remainingLsp = Math.max(0, lspTargetGoal.value - totalLsp);
            var lspProgress = Math.min(100, (totalLsp / lspTargetGoal.value) * 100);
            
            document.getElementById('remaining-lsp-display').textContent = remainingLsp.toFixed(0);
            document.getElementById('lsp-progress-fill').style.width = lspProgress + '%';
            document.getElementById('lsp-progress-text').textContent = lspProgress.toFixed(1) + '%';

            // FOPé€²æ—æ›´æ–°
            var totalFop = currentFop + earnedFop;
            var fopCost = earnedFop > 0 ? (totalFare / earnedFop) : 0;
            
            document.getElementById('current-fop-display').textContent = currentFop.toLocaleString();
            document.getElementById('earned-fop-display').textContent = Math.round(earnedFop).toLocaleString();
            document.getElementById('total-fop-display').textContent = Math.round(totalFop).toLocaleString();
            document.getElementById('fop-cost-display').textContent = fopCost > 0 ? fopCost.toFixed(2) + 'å††/FOP' : '0.00å††/FOP';

            var remainingFop = Math.max(0, fopTargetGoal.value - Math.round(totalFop));
            var fopProgress = Math.min(100, (Math.round(totalFop) / fopTargetGoal.value) * 100);
            
            document.getElementById('remaining-fop-display').textContent = remainingFop.toLocaleString();
            document.getElementById('fop-progress-fill').style.width = fopProgress + '%';
            document.getElementById('fop-progress-text').textContent = fopProgress.toFixed(1) + '%';
        }

        function calculateAndCompare() {
            clearError();
            resultsSection.style.display = 'none';
            
            var segments = segmentsContainer.getElementsByClassName('segment');
            var currentFop = parseInt(document.getElementById('current-fop').value) || 0;
            var statusInfo = getJmbStatusFromFop(currentFop); // FOPã‹ã‚‰è‡ªå‹•åˆ¤å®š
            var cardKey = document.getElementById('jal-card').value;
            var cardInfo = cardTypes[cardKey];
            var smpChecked = document.getElementById('smp-option').checked;
            var totalFare = updateTotalFare(); // åŒºé–“æ–™é‡‘ã®åˆè¨ˆã‚’å–å¾—

            var totalBaseMiles = 0;
            var totalFop = 0;
            var totalLsp = 0;
            var hasError = false;

            // ãƒ•ãƒ©ã‚¤ãƒˆåŒºé–“ã®è¨ˆç®—
            for (var i = 0; i < segments.length; i++) {
                var segment = segments[i];
                var from = segment.querySelector('.from-airport').value;
                var to = segment.querySelector('.to-airport').value;
                var classKey = segment.querySelector('.class-select').value;
                var fareTypeKey = segment.querySelector('.fare-type-select').value;
                var isRoundTrip = segment.querySelector('.round-trip-checkbox').checked;
                var tripMultiplier = isRoundTrip ? 2 : 1;
                
                var route = from + '-' + to;
                var baseMiles = mileageData[route];
                var fareInfo = fareTypes[fareTypeKey];
                var classInfo = cabinClasses[classKey];

                if (from === to) {
                    displayError('åŒºé–“ ' + (i + 1) + ': å‡ºç™ºåœ°ã¨ç›®çš„åœ°ãŒåŒã˜ã§ã™ã€‚');
                    hasError = true; 
                    break;
                }
                if (baseMiles === undefined) {
                    displayError('åŒºé–“ ' + (i + 1) + ' (' + route + '): ã“ã®è·¯ç·šã®ãƒã‚¤ãƒ«ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“ã€‚ç›´è¡Œä¾¿ãŒãªã„å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚');
                    hasError = true; 
                    break;
                }

                if (baseMiles > 0 && fareInfo.mileMultiplier > 0) {
                    // ä¿®æ­£ã•ã‚ŒãŸã‚¯ãƒ©ã‚¹ãƒœãƒ¼ãƒŠã‚¹è¨ˆç®—ï¼ˆãƒã‚¤ãƒ«ï¼‰
                    var segmentMiles = baseMiles * fareInfo.mileMultiplier * (1 + classInfo.mileBonus);
                    totalBaseMiles += segmentMiles * tripMultiplier;
                    
                    // FOPè¨ˆç®—ï¼ˆã‚¯ãƒ©ã‚¹ãƒœãƒ¼ãƒŠã‚¹é©ç”¨ï¼‰
                    var segmentFop = Math.round((baseMiles * fareInfo.fopMultiplier * (1 + classInfo.fopBonus)) + fareInfo.bonusFop);
                    totalFop += segmentFop * tripMultiplier;
                    
                    // LSPè¨ˆç®—ï¼ˆæ­ä¹—ã”ã¨ï¼‰
                    totalLsp += 5 * tripMultiplier;
                }
            }

            if (hasError) return;

            // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒœãƒ¼ãƒŠã‚¹
            var statusBonusMiles = totalBaseMiles * statusInfo.bonus;
            
            // ã‚«ãƒ¼ãƒ‰ãƒœãƒ¼ãƒŠã‚¹
            var cardBonusMiles = totalBaseMiles * cardInfo.flightBonus;
            
            // åˆè¨ˆãƒ•ãƒ©ã‚¤ãƒˆãƒã‚¤ãƒ«
            var totalFlightMiles = totalBaseMiles + statusBonusMiles + cardBonusMiles;

            // æ±ºæ¸ˆãƒã‚¤ãƒ«è¨ˆç®—
            var shoppingMiles = 0;
            var addOnMiles = 0;
            var paymentLsp = 0;

            if (cardKey !== 'none' && totalFare > 0) {
                // ã‚·ãƒ§ãƒƒãƒ”ãƒ³ã‚°ãƒã‚¤ãƒ«
                var shoppingRate = smpChecked ? cardInfo.shoppingRate * 2 : cardInfo.shoppingRate;
                shoppingMiles = Math.floor(totalFare / 100 * shoppingRate);
                
                // ã‚¢ãƒ‰ã‚ªãƒ³ãƒã‚¤ãƒ«ï¼ˆAmexã¨Platinumã®ã¿ï¼‰
                if (cardInfo.addOnMileRate > 0) {
                    addOnMiles = Math.floor(totalFare / 100 * cardInfo.addOnMileRate);
                }
                
                // æ±ºæ¸ˆLSP
                var totalPaymentMiles = shoppingMiles + addOnMiles;
                if (totalPaymentMiles > 0) {
                    paymentLsp = (totalPaymentMiles / 2000) * 5;
                }
            }

            var totalMiles = totalFlightMiles + shoppingMiles + addOnMiles;
            var totalAllLsp = totalLsp + paymentLsp;

            // é€²æ—çŠ¶æ³æ›´æ–°
            updateProgress(totalAllLsp, Math.round(totalFop), totalFare);

            // çµæœã‚µãƒãƒªãƒ¼è¡¨ç¤º
            document.getElementById('flight-miles-summary').textContent = Math.round(totalFlightMiles).toLocaleString();
            document.getElementById('payment-miles-summary').textContent = Math.round(shoppingMiles + addOnMiles).toLocaleString();
            document.getElementById('total-miles-summary').textContent = Math.round(totalMiles).toLocaleString();
            document.getElementById('total-fop-summary').textContent = Math.round(totalFop).toLocaleString();
            document.getElementById('total-lsp-earned-summary').textContent = totalAllLsp.toFixed(2);

            // è©³ç´°çµæœãƒ†ãƒ¼ãƒ–ãƒ«è¡¨ç¤º
            displayResultsTable({
                flightMiles: Math.round(totalFlightMiles),
                paymentMiles: Math.round(shoppingMiles + addOnMiles),
                totalMiles: Math.round(totalMiles),
                fop: Math.round(totalFop),
                lsp: totalAllLsp.toFixed(2),
                lspCost: totalAllLsp > 0 ? (totalFare / totalAllLsp).toFixed(2) : "0.00",
                fopCost: totalFop > 0 ? (totalFare / totalFop).toFixed(2) : "0.00"
            });
            
            resultsSection.style.display = 'block';
            resultsSection.classList.add('fade-in');
        }

        function displayResultsTable(data) {
            var tableHTML = 
                '<table class="results-table">' +
                    '<thead>' +
                        '<tr>' +
                            '<th>é …ç›®</th>' +
                            '<th>å€¤</th>' +
                            '<th>å˜ä¾¡</th>' +
                        '</tr>' +
                    '</thead>' +
                    '<tbody>' +
                        '<tr>' +
                            '<td>ãƒ•ãƒ©ã‚¤ãƒˆãƒã‚¤ãƒ«</td>' +
                            '<td class="value-highlight">' + data.flightMiles.toLocaleString() + '</td>' +
                            '<td>-</td>' +
                        '</tr>' +
                        '<tr>' +
                            '<td>æ±ºæ¸ˆãƒã‚¤ãƒ«</td>' +
                            '<td>' + data.paymentMiles.toLocaleString() + '</td>' +
                            '<td>-</td>' +
                        '</tr>' +
                        '<tr>' +
                            '<td>åˆè¨ˆãƒã‚¤ãƒ«</td>' +
                            '<td class="value-highlight">' + data.totalMiles.toLocaleString() + '</td>' +
                            '<td>-</td>' +
                        '</tr>' +
                        '<tr>' +
                            '<td>FOP</td>' +
                            '<td class="value-highlight">' + data.fop.toLocaleString() + '</td>' +
                            '<td>' + data.fopCost + ' å††/FOP</td>' +
                        '</tr>' +
                        '<tr>' +
                            '<td>LSP</td>' +
                            '<td class="value-highlight">' + data.lsp + '</td>' +
                            '<td>' + data.lspCost + ' å††/LSP</td>' +
                        '</tr>' +
                    '</tbody>' +
                '</table>';
            tableContainer.innerHTML = tableHTML;
        }

        // ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼
        addSegmentBtn.addEventListener('click', createSegment);
        calculateBtn.addEventListener('click', calculateAndCompare);

        // åˆæœŸåŒ–
        window.addEventListener('load', function() {
            // ä¿å­˜ã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿
            var dataLoaded = loadSavedData();
            
            // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¡¨ç¤ºã‚’æ›´æ–°
            updateStatusDisplays();
            
            // è‡ªå‹•ä¿å­˜ã‚’è¨­å®š
            setupAutoSave();
            
            // åˆæœŸåŒºé–“ã‚’ä½œæˆ
            createSegment();
            updateTotalFare();
            
            // ãƒ‡ãƒ¼ã‚¿ãŒèª­ã¿è¾¼ã¾ã‚ŒãŸå ´åˆã®é€šçŸ¥
            if (dataLoaded) {
                setTimeout(function() {
                    var notification = document.createElement('div');
                    notification.style.cssText = `
                        position: fixed;
                        top: 20px;
                        right: 20px;
                        background: linear-gradient(135deg, #10b981, #059669);
                        color: white;
                        padding: 15px 20px;
                        border-radius: 10px;
                        box-shadow: 0 4px 15px rgba(16, 185, 129, 0.3);
                        z-index: 9999;
                        font-weight: 600;
                        animation: slideInRight 0.5s ease-out;
                    `;
                    notification.innerHTML = '<i class="fas fa-check-circle"></i> å‰å›ã®è¨­å®šã‚’å¾©å…ƒã—ã¾ã—ãŸ';
                    document.body.appendChild(notification);
                    
                    setTimeout(function() {
                        notification.style.animation = 'slideOutRight 0.5s ease-in';
                        setTimeout(function() {
                            document.body.removeChild(notification);
                        }, 500);
                    }, 3000);
                }, 500);
            }
        });
    </script>
</body>
</html>
